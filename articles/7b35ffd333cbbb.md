---
title: "単体テストの考え方/使い方 読みました"
emoji: "🎉"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["test", "テスト", "単体テスト"]
published: false
---

# 古典学派?ロンドン学派？

書籍ではまず単体テストとは何たるかを定義されたいた。様々なテストがある中で単体テストとは以下の 3 つの条件を満たす。

1. 単体と呼ばれる少量のコードを検証する
2. 実行時間が短い
3. 隔離された状態で実行される

これらの条件は曖昧なことから、捉え方によって思想が分かれる。古典学派とロンドン学派である。

例えば 1 に関しては
「単体と呼ばれる少量のコード」を
古典学派は「サービスとしての一つの振る舞い」と捉える。
ロンドン学派は「一つのクラス」と捉える。

つまり古典学派では単体テストが一つのクラスに縛られることはない。

これによって 3 に関しても
ロンドン学派では「テスト対称システム」と「協力者オブジェクト」を隔離する。
一方で古典学派はテストケースを隔離するため、むやみやたらにテスト・ダブルは使用しない。

:::message
私自身もぼんやりと古典学派だったが、読了後は古典学派になった。単体テストはそれ自体のメンテナンスコストも考慮する必要があるため、実装の詳細はテストするべきではないためである。実装の詳細をテストすると、テストが壊れやすくなるため、リファクタリング耐性が非常に低くなる。単体テストは「今正確に動くこと」だけを検証しているわけではないので、ここを考慮すると、私も古典学派を推したい。
それと単純にテスト・ダブルばかりの準備フェーズが肥大化した単体テストは非常に読みずらく、何を検証しているか理解することが容易ではない。
:::
